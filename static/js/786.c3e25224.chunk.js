"use strict";(self.webpackChunkinterlinked=self.webpackChunkinterlinked||[]).push([[786],{7599:function(e,t,s){s.r(t),s.d(t,{default:function(){return B}});var o=s(1413),i=s(2791),r=s(7689),n="Profile_profile__6zJFg",a=s(9439),l="ProfileInfo_profileInfo__qsv8I",c="ProfileInfo_bgImg__EuNqs",u="ProfileInfo_profileImage__XTKqH",d="ProfileInfo_descr__I3k1E",f=s.p+"static/media/background.5f86a9ceeff1c35794a9.webp",p=s(7396),m="ChangeImg_changeImgBtn__6Ibe2",h=s(184),x=function(e){return(0,h.jsx)("div",{className:m,children:(0,h.jsx)("input",{onChange:function(t){e.updatePhoto(t.target.files[0])},type:"file",accept:".png"})})},g={},j={contactsWrap:"Socials_contactsWrap__BkIYA",contacts:"Socials_contacts__kA5td"},v=function(e){var t=e.title,s=e.value;return(0,h.jsxs)("div",{className:j.contact,children:[t,": ",s]})},_=function(e){var t=(0,i.useState)(!1),s=(0,a.Z)(t,2),o=s[0],r=s[1];return(0,h.jsxs)("div",{className:j.contactsWrap,children:[(0,h.jsx)("div",{className:"toggleSocialsBtn",onClick:function(){return r(!o)},children:"Socials"}),(0,h.jsx)("div",{className:j.contacts,children:o?Object.keys(e.profile.contacts).map((function(t){return(0,h.jsx)(v,{title:t,value:e.profile.contacts[t]},t)})):""})]})},b=function(e){var t=(0,i.useState)(e.status),s=(0,a.Z)(t,2),o=s[0],r=s[1],n=(0,i.useState)(!1),l=(0,a.Z)(n,2),c=l[0],u=l[1];(0,i.useEffect)((function(){return r(e.status)}),[e.status]);return(0,h.jsx)("div",{children:c?(0,h.jsx)("div",{children:(0,h.jsx)("input",{onChange:function(e){r(e.currentTarget.value)},autoFocus:!0,onBlur:function(){u(!1),e.updateStatus(o)},value:o})}):(0,h.jsx)("div",{children:(0,h.jsx)("span",{onDoubleClick:function(){u(!0)},children:e.status||"---"})})})},P=function(e){return(0,i.useEffect)((function(){e.userId&&e.setInEdit(!1)}),[e.userId]),(0,h.jsxs)(h.Fragment,{children:[e.userId?"":(0,h.jsx)("button",{className:"btnProfileEdit",onClick:function(){return e.setInEdit(!0)},children:"Edit profile"}),(0,h.jsx)("h1",{children:e.profile.fullName}),(0,h.jsx)(b,{updateStatus:e.updateStatus,status:e.status}),(0,h.jsxs)("div",{className:g.aboutMe,children:[(0,h.jsxs)("div",{children:["About me: ",e.profile.aboutMe]}),(0,h.jsxs)("div",{children:["Looking for a job description: ",e.profile.lookingForAJobDescription]})]}),(0,h.jsx)(_,{profile:e.profile})]})},I="ProfileDataForm_profileDataForm__A1zc0",k=s(9195),N=(s(2366),function(e){var t=(0,k.cI)({mode:"all",defaultValues:{fullName:e.profile.fullName,aboutMe:e.profile.aboutMe,lookingForAJobDescription:e.profile.lookingForAJobDescription,contacts:{facebook:e.profile.contacts.facebook,website:e.profile.contacts.website,vk:e.profile.contacts.vk,twitter:e.profile.contacts.twitter,instagram:e.profile.contacts.instagram,youtube:e.profile.contacts.youtube,github:e.profile.contacts.github,mainLink:e.profile.contacts.mainLink}}}),s=t.register,i=t.handleSubmit,r=t.setError,n=t.formState,a=n.errors,l=n.isValid;return(0,h.jsx)("div",{className:I,children:(0,h.jsxs)("form",{onSubmit:i((function(t){e.saveProfile(t,e.profile.userId,r).then((function(){return e.setInEdit(!1)})).catch((function(e){return console.log(e)}))})),children:[(0,h.jsx)("button",{type:"submit",className:"btnProfileEdit",disabled:!l,children:"Save changes"}),(0,h.jsx)("input",(0,o.Z)({className:"logInput",placeholder:"About me",type:"text"},s("aboutMe",{required:"About me is required",validate:function(e){return""!==e.trim()?null:"No white spaces"}}))),a.aboutMe&&(0,h.jsx)("div",{className:"errorMsg",children:a.aboutMe.message}),(0,h.jsx)("input",(0,o.Z)({className:"logInput",placeholder:"Looking for a job description",type:"text"},s("lookingForAJobDescription",{required:"Looking for a job description is required",validate:function(e){return""!==e.trim()?null:"No white spaces"}}))),a.lookingForAJobDescription&&(0,h.jsx)("div",{className:"errorMsg",children:a.lookingForAJobDescription.message}),(0,h.jsx)("div",{style:{margin:"10px 0 0 5px"},children:"Socials (optional):"}),Object.keys(e.profile.contacts).map((function(e){var t;return(0,h.jsxs)("div",{children:[(0,h.jsx)("input",(0,o.Z)({className:"logInput",placeholder:e[0].toUpperCase()+e.slice(1),type:"text"},s("contacts.".concat(e)))),(null===(t=a.contacts)||void 0===t?void 0:t[e])&&(0,h.jsx)("div",{className:"errorMsg",children:a.contacts[e].message})]},e)}))]})})}),A=function(e){var t=(0,i.useState)(!1),s=(0,a.Z)(t,2),r=s[0],n=s[1];return(0,h.jsxs)("div",{className:l,children:[(0,h.jsx)("div",{className:c,children:(0,h.jsx)("img",{src:f})}),(0,h.jsxs)("div",{className:u,children:[e.profile.photos.large?(0,h.jsx)("img",{src:e.profile.photos.large}):(0,h.jsx)("img",{src:p}),e.userId?"":(0,h.jsx)(x,{updatePhoto:e.updatePhoto})]}),(0,h.jsx)("div",{className:d,children:void 0===e.userId&&r?(0,h.jsx)(N,{profile:e.profile,setInEdit:n,saveProfile:e.saveProfile}):(0,h.jsx)(P,(0,o.Z)({userId:e.userId,setInEdit:n},e))})]})},S="MyPosts_myPosts__PInun",w="MyPosts_posts__2grYD",C="MyPosts_postForm__fxXFn",M={post:"Post_post__018FT",avaAndText:"Post_avaAndText__LkVvV",text:"Post_text__IWwMl",like:"Post_like__LhxkR",likesCount:"Post_likesCount__PEBBG"},y=function(e){return(0,h.jsxs)("div",{className:M.post,children:[(0,h.jsxs)("div",{className:M.avaAndText,children:[e.profile.photos.large?(0,h.jsx)("img",{src:e.profile.photos.large}):(0,h.jsx)("img",{className:M.img,src:p}),(0,h.jsx)("div",{className:M.text,children:e.message})]}),(0,h.jsxs)("div",{className:M.like,children:["like",(0,h.jsx)("span",{className:M.likesCount,children:e.likesCount})]})]})},D=function(e){var t=(0,k.cI)({mode:"onChange"}),s=t.register,i=t.handleSubmit,r=t.formState.errors,n=t.reset,a=function(t){e.addPost(t.newPostText),n()},l=function(){return(0,h.jsxs)("form",{className:C,onSubmit:i(a),children:[(0,h.jsx)("textarea",(0,o.Z)({},s("newPostText",{required:"Write smth...",validate:function(e){return""!==e.trim()?null:"No white spaces"}}))),(0,h.jsxs)("div",{children:[r.newPostText&&(0,h.jsx)("div",{className:"errorMsg",children:r.newPostText.message}),(0,h.jsx)("button",{children:"Add post"})]})]})};return(0,h.jsxs)("div",{className:S,children:[(0,h.jsx)("h4",{children:"My posts"}),(0,h.jsx)(l,{}),(0,h.jsx)("div",{className:w,children:e.postsData.map((function(t){return(0,h.jsx)(y,{profile:e.profile,message:t.message,likesCount:t.likesCount},t.id)}))})]})},E=(0,i.memo)(D),F=s(6868),Z=s(3531),T=(0,Z.$j)((function(e){return{postsData:e.profilePage.postsData,newPostText:e.profilePage.newPostText}}),{addPost:F.q2})(E),q=s(5197),J=function(e){return e.profile?(0,h.jsxs)("div",{className:n,children:[(0,h.jsx)(A,{saveProfile:e.saveProfile,userId:e.userId,updatePhoto:e.updatePhoto,updateStatus:e.updateStatus,profileAuthImg:e.profileAuthImg,status:e.status,profile:e.profile}),(0,h.jsx)(T,{profile:e.profile})]}):(0,h.jsx)(q.Z,{})},L=s(5927),B=(0,s(7781).qC)((0,Z.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,id:e.auth.id,profileAuthImg:e.profilePage.profileAuthImg}}),{getUserProfile:F.et,getStatus:F.lR,updateStatus:F.Nf,updatePhoto:F.tU,saveProfile:F.Ii}),L.D)((function(e){var t=(0,r.UO)().userId,s=(0,r.s0)();return(0,i.useEffect)((function(){t||(t=e.id)||s("/login"),t&&(e.getUserProfile(t),e.getStatus(t))}),[t,e.profileAuthImg]),(0,h.jsx)(J,(0,o.Z)((0,o.Z)({},e),{},{userId:t}))}))},5927:function(e,t,s){s.d(t,{D:function(){return l}});var o=s(1413),i=(s(2791),s(7689)),r=s(3531),n=s(184),a=function(e){return{isAuth:e.auth.isAuth}},l=function(e){return(0,r.$j)(a)((function(t){return t.isAuth?(0,n.jsx)(e,(0,o.Z)({},t)):(0,n.jsx)(i.Fg,{to:"/login"})}))}}}]);
//# sourceMappingURL=786.c3e25224.chunk.js.map