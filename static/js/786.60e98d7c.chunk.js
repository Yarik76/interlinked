"use strict";(self.webpackChunkinterlinked=self.webpackChunkinterlinked||[]).push([[786],{7599:function(t,e,s){s.r(e),s.d(e,{default:function(){return L}});var a=s(1413),n=s(2791),o=s(7689),i="Profile_profile__6zJFg",r=s(9439),l="ProfileInfo_profileInfo__qsv8I",c="ProfileInfo_bgImg__EuNqs",u="ProfileInfo_profileImage__XTKqH",d="ProfileInfo_descr__I3k1E",p=s.p+"static/media/background.5f86a9ceeff1c35794a9.webp",f=s(7396),m="ChangeImg_changeImgBtn__6Ibe2",x=s(184),h=function(t){return(0,x.jsx)("div",{className:m,children:(0,x.jsx)("input",{onChange:function(e){t.updatePhoto(e.target.files[0])},type:"file",accept:".png"})})},g={},j={contactsWrap:"Socials_contactsWrap__BkIYA",contacts:"Socials_contacts__kA5td"},_=function(t){var e=t.title,s=t.value;return(0,x.jsxs)("div",{className:j.contact,children:[e,": ",s]})},v=function(t){var e=(0,n.useState)(!1),s=(0,r.Z)(e,2),a=s[0],o=s[1];return(0,x.jsxs)("div",{className:j.contactsWrap,children:[(0,x.jsx)("div",{className:"toggleSocialsBtn",onClick:function(){return o(!a)},children:"Socials"}),(0,x.jsx)("div",{className:j.contacts,children:a?Object.keys(t.profile.contacts).map((function(e){return(0,x.jsx)(_,{title:e,value:t.profile.contacts[e]},e)})):""})]})},I=function(t){var e=(0,n.useState)(t.status),s=(0,r.Z)(e,2),a=s[0],o=s[1],i=(0,n.useState)(!1),l=(0,r.Z)(i,2),c=l[0],u=l[1];(0,n.useEffect)((function(){return o(t.status)}),[t.status]);return(0,x.jsx)("div",{children:c?(0,x.jsx)("div",{children:(0,x.jsx)("input",{onChange:function(t){o(t.currentTarget.value)},autoFocus:!0,onBlur:function(){u(!1),t.updateStatus(a)},value:a})}):(0,x.jsx)("div",{children:(0,x.jsx)("span",{onDoubleClick:function(){u(!0)},children:t.status||"---"})})})},N=function(t){return t.userId&&t.setInEdit(!1),(0,x.jsxs)(x.Fragment,{children:[t.userId?"":(0,x.jsx)("button",{className:"btnProfileEdit",onClick:function(){return t.setInEdit(!0)},children:"Edit profile"}),(0,x.jsx)("h1",{children:t.profile.fullName}),(0,x.jsx)(I,{updateStatus:t.updateStatus,status:t.status}),(0,x.jsxs)("div",{className:g.aboutMe,children:["About me: ",t.profile.aboutMe]}),(0,x.jsx)(v,{profile:t.profile})]})},b="ProfileDataForm_profileDataForm__A1zc0",P=s(9195),k=function(t){var e=(0,P.cI)({mode:"all",defaultValues:{fullName:t.profile.fullName,aboutMe:t.profile.aboutMe,facebook:t.profile.contacts.facebook,website:t.profile.contacts.website,vk:t.profile.contacts.vk,twitter:t.profile.contacts.twitter,instagram:t.profile.contacts.instagram,youtube:t.profile.contacts.youtube,github:t.profile.contacts.github,mainLink:t.profile.contacts.mainLink}}),s=e.register,n=e.handleSubmit,o=(e.reset,e.formState),i=o.errors,r=o.isValid;return(0,x.jsx)("div",{className:b,children:(0,x.jsxs)("form",{onSubmit:n((function(e){console.log(e),t.setInEdit(!1)})),children:[(0,x.jsx)("button",{type:"submit",className:"btnProfileEdit",disabled:!r,children:"Save changes"}),(0,x.jsx)("input",(0,a.Z)({className:"logInput ".concat(i.fullName&&"errorBorder"),placeholder:"Fullname",type:"text"},s("fullName",{required:"Fullname is required",validate:function(t){return""!==t.trim()?null:"No white spaces"}}))),i.fullName&&(0,x.jsx)("div",{className:"errorMsg",children:i.fullName.message}),(0,x.jsx)("input",(0,a.Z)({className:"logInput",placeholder:"About me",type:"text"},s("aboutMe"))),(0,x.jsx)("div",{style:{margin:"10px 0 0 5px"},children:"Socials (optional):"}),(0,x.jsx)("input",(0,a.Z)({className:"logInput",placeholder:"Facebook",type:"text"},s("contacts.facebook"))),(0,x.jsx)("input",(0,a.Z)({className:"logInput",placeholder:"Website",type:"text"},s("contacts.website"))),(0,x.jsx)("input",(0,a.Z)({className:"logInput",placeholder:"Vk",type:"text"},s("contacts.vk"))),(0,x.jsx)("input",(0,a.Z)({className:"logInput",placeholder:"Twitter",type:"text"},s("contacts.twitter"))),(0,x.jsx)("input",(0,a.Z)({className:"logInput",placeholder:"Instagram",type:"text"},s("contacts.instagram"))),(0,x.jsx)("input",(0,a.Z)({className:"logInput",placeholder:"Youtube",type:"text"},s("contacts.youtube"))),(0,x.jsx)("input",(0,a.Z)({className:"logInput",placeholder:"Github",type:"text"},s("contacts.github"))),(0,x.jsx)("input",(0,a.Z)({className:"logInput",placeholder:"Mainlink",type:"text"},s("contacts.mainLink")))]})})},S=function(t){var e=(0,n.useState)(!1),s=(0,r.Z)(e,2),o=s[0],i=s[1];return(0,n.useEffect)((function(){return console.log(o)}),[o]),(0,x.jsxs)("div",{className:l,children:[(0,x.jsx)("div",{className:c,children:(0,x.jsx)("img",{src:p})}),(0,x.jsxs)("div",{className:u,children:[t.profile.photos.large?(0,x.jsx)("img",{src:t.profile.photos.large}):(0,x.jsx)("img",{src:f}),t.userId?"":(0,x.jsx)(h,{updatePhoto:t.updatePhoto})]}),(0,x.jsx)("div",{className:d,children:void 0===t.userId&&o?(0,x.jsx)(k,{profile:t.profile,setInEdit:i}):(0,x.jsx)(N,(0,a.Z)({userId:t.userId,setInEdit:i},t))})]})},y="MyPosts_myPosts__PInun",Z="MyPosts_posts__2grYD",w="MyPosts_postForm__fxXFn",A={post:"Post_post__018FT",avaAndText:"Post_avaAndText__LkVvV",text:"Post_text__IWwMl",like:"Post_like__LhxkR",likesCount:"Post_likesCount__PEBBG"},C=function(t){return(0,x.jsxs)("div",{className:A.post,children:[(0,x.jsxs)("div",{className:A.avaAndText,children:[t.profile.photos.large?(0,x.jsx)("img",{src:t.profile.photos.large}):(0,x.jsx)("img",{className:A.img,src:f}),(0,x.jsx)("div",{className:A.text,children:t.message})]}),(0,x.jsxs)("div",{className:A.like,children:["like",(0,x.jsx)("span",{className:A.likesCount,children:t.likesCount})]})]})},E=function(t){var e=(0,P.cI)({mode:"onChange"}),s=e.register,n=e.handleSubmit,o=e.formState.errors,i=e.reset,r=function(e){t.addPost(e.newPostText),i()},l=function(){return(0,x.jsxs)("form",{className:w,onSubmit:n(r),children:[(0,x.jsx)("textarea",(0,a.Z)({},s("newPostText",{required:"Write smth...",validate:function(t){return""!==t.trim()?null:"No white spaces"}}))),(0,x.jsxs)("div",{children:[o.newPostText&&(0,x.jsx)("div",{className:"errorMsg",children:o.newPostText.message}),(0,x.jsx)("button",{children:"Add post"})]})]})};return(0,x.jsxs)("div",{className:y,children:[(0,x.jsx)("h4",{children:"My posts"}),(0,x.jsx)(l,{}),(0,x.jsx)("div",{className:Z,children:t.postsData.map((function(e){return(0,x.jsx)(C,{profile:t.profile,message:e.message,likesCount:e.likesCount},e.id)}))})]})},M=(0,n.memo)(E),T=s(6868),F=s(3531),D=(0,F.$j)((function(t){return{postsData:t.profilePage.postsData,newPostText:t.profilePage.newPostText}}),{addPost:T.q2})(M),q=s(5197),B=function(t){return t.profile?(0,x.jsxs)("div",{className:i,children:[(0,x.jsx)(S,{userId:t.userId,updatePhoto:t.updatePhoto,updateStatus:t.updateStatus,profileAuthImg:t.profileAuthImg,status:t.status,profile:t.profile}),(0,x.jsx)(D,{profile:t.profile})]}):(0,x.jsx)(q.Z,{})},W=s(5927),L=(0,s(7781).qC)((0,F.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,id:t.auth.id,profileAuthImg:t.profilePage.profileAuthImg}}),{getUserProfile:T.et,getStatus:T.lR,updateStatus:T.Nf,updatePhoto:T.tU}),W.D)((function(t){var e=(0,o.UO)().userId,s=(0,o.s0)();return(0,n.useEffect)((function(){e||(e=t.id)||s("/login"),e&&(t.getUserProfile(e),t.getStatus(e))}),[e,t.profileAuthImg]),(0,x.jsx)(B,(0,a.Z)((0,a.Z)({},t),{},{userId:e}))}))},5927:function(t,e,s){s.d(e,{D:function(){return l}});var a=s(1413),n=(s(2791),s(7689)),o=s(3531),i=s(184),r=function(t){return{isAuth:t.auth.isAuth}},l=function(t){return(0,o.$j)(r)((function(e){return e.isAuth?(0,i.jsx)(t,(0,a.Z)({},e)):(0,i.jsx)(n.Fg,{to:"/login"})}))}}}]);
//# sourceMappingURL=786.60e98d7c.chunk.js.map